<!DOCTYPE html> <html lang="en" class="no-js"><head ><meta name="keywords" content="presentation, talk, percy, design, review, visual, regression" /> <meta name="description" content="How to utilise visual regression testing to automate design review (UAT) within your organisation" /> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1." /> <meta name="author" content="Callum Silcock, contact@csi.lk" /> <meta name="reply-to" content="contact@csi.lk" /> <meta name="url" content="https://www.csi.lk" /> <meta name="coverage" content="Worldwide" /> <meta name="distribution" content="Global" /> <meta name="rating" content="General" /> <meta name="revisit-after" content="7 days" /> <meta name="og:type" content="text/html" /> <meta name="og:site_name" content="Callum Silcock | Lead Front End Developer & Conference Speaker" /> <meta name="og:email" content="contact@csi.lk" /> <meta name="og:phone_number" content="+447848472822" /> <meta name="theme-color" content="#26292c" /> <meta rel="icon" href="/favicon.ico" /> <meta rel="icon" href="/favicon.svg" type="image/svg+xml" /> <link rel="canonical" href="https://csi.lk/talks/visual-regression-how-to.html" /> <title >Automating Design Review with Visual Regression</title> <link rel="stylesheet" href="/styles/index.css?v=2.3.3" /></head> <body ><div hidden><span id="open-new-window">Opens in a new window</span> <span id="open-external">Opens an external site</span> <span id="open-new-window-external">Opens an external site in a new window</span> <span id="open-email">Opens email application</span></div> <div class="page-container fixed" data-testid="page-container"><a href="#content" class="skip"></a> <nav class="navigation"><a class="logo" href="/"><i class="icon-terminal" role="presentation"> </i> <h2 class="logo">Callum 
 Silcock</h2></a> <a href="/talks">talks</a> <a href="/timeline">timeline</a> <a href="/articles">articles</a> <a href="/bookshelf">bookshelf</a></nav> <main ><article id="content" class="talk"><h1 >Automating Design Review with Visual Regression</h1> <div class="talk-subheader"><h2 class="talk-date">Posted on:  <time datetime="2020-06-10">2020-06-10</time></h2> <a href="https://github.com/csi-lk/csi.lk/tree/master/src/talks/visual-regression-how-to.md" target="_blank" rel="noopener" aria-describedby="open-new-window-external">source</a></div> How to utilise visual regression testing to automate design review (UAT) within your organisation <div class="embed-container"><iframe src="https://speakerdeck.com/player/8f193b3722a9406893bf77e3b709db4f" allowfullscreen scrolling="no" allow="encrypted-media;">Loading SpeakerDeck within iFrame</iframe></div> <h2 class="talk-date">Relevant Links</h2> <ul ><li ><a href="https://github.com/csi-lk/visual-regression-how-to" target="_blank" rel="noopener" aria-describedby="open-new-window-external">Companion Repo</a></li> <li ><a href="https://speakerdeck.com/csilk/automating-design-review-with-visual-regression" target="_blank" rel="noopener" aria-describedby="open-new-window-external">Slides Presentation on Speakerdeck</a></li> <li ><a href="https://github.com/csi-lk/visual-regression-how-to/blob/master/talk/automating-design-review-with-visual-regression.pdf" target="_blank" rel="noopener" aria-describedby="open-new-window-external">Slides in .PDF format</a></li> <li ><a href="https://github.com/csi-lk/visual-regression-how-to/blob/master/talk/automating-design-review-with-visual-regression-raw-md" target="_blank" rel="noopener" aria-describedby="open-new-window-external">Raw markdown of the slides (incl. notes)</a></li></ul> <h1>Automating Design Review with Visual Regression</h1>
<p>🇦🇺
&quot;dartah&quot; = data
&quot;rehpo&quot; = repo</p>
<p>^ I have an Australian accent and mispronounce things</p>
<h2>What are we trying to solve?</h2>
<ul>
<li>CSS Sucks [insert family guy blinds gif here]</li>
<li>Manual regression sucks</li>
<li>UAT sucks</li>
</ul>
<p>^ As I start all of my talks, what are we trying to solve?</p>
<p>^ eg. The shadow is off, the color is different from the design
^</p>
<p>^ QA has to keep so many things in their head at once, they plain miss design changes</p>
<p>^ Anyone who has worked with a designer knows how annoying the 1 pixel issues are</p>
<p>^ This UAT process takes a long time and seems to be disjointed from the developer</p>
<pre><code class="hljs language-md"><span class="hljs-code">                                                                                                 
            .─.                      .─.                                                      .─. 
           (   )    ┌────────┬─┐    (   )   ┌──────────┐   ┌────────┐         ┌────────┐     (   )
           ┌`─&#x27;┐    │  Ticket└─┤    ┌`─&#x27;┐   │          │   │        │  Merge  │   QA   │     ┌`─&#x27;┐
           │Des│───&gt;│  Story   │───&gt;│Dev│──&gt;│  Branch  │──&gt;│   PR   │────────&gt;│  STG   │──┬─&gt;│QA │
           │ign│    │          │    │   │   │          │   │        │         │  UAT   │  │  │   │
           └───┘    └──────────┘    └───┘   └──────────┘   └┬───────┘         └────────┘  │  └───┘
                                      ▲                     ├&gt;Tests Pass                  │   .─. 
                                      │                     └&gt;Approval                    │  (   )
                                      │                                                   │  ┌`─&#x27;┐
                                      │                                                   │  │Des│
                                      │                                                   └─&gt;│ign│
                                      │                     Fails Something                  └─┬─┘
                                      └────────────────────────────────────────────────────────┘                         
</span></code></pre>
<p>^ Your current workflow probably consists of design &gt; ticket &gt; dev &gt; pr &gt; merge &gt; qa / staging / uat regression &gt; designer finds an issue &gt; back to dev</p>
<p>^ If anyone has seen my other talks there's a theme of pushing testing as close to the front of the process as possible</p>
<p>^ So my proposal is, let's bring this design review process forward to the PR stage with Visual Regression Testing</p>
<h2>So what is visual regression testing?</h2>
<ul>
<li>Screenshot diffing</li>
<li>Gold (master) vs new (feature branch)</li>
<li>Expose unintended changes</li>
<li>Give us a review process for the visual</li>
</ul>
<p>^ Pretty much we're diffing screenshots</p>
<p>^ Between master vs feature or old vs new depending on what you're doing</p>
<p>^ Change thing here affects thing over there (dreaded 'user reporting something broken in IE')</p>
<p>^ Most importantly gives us a new stream of review process for visual</p>
<pre><code class="hljs language-md"><span class="hljs-code">                          Λ                                                             
                         ╱ ╲                                                            
                        ╱   ╲                                                           
                       ╱ E2E ╲                                                          
                      ╱───────╲                                                         
                     ╱         ╲                                                        
                    ╱           ╲                                                       
                   ╱ Integration ╲    &lt;-- We are here                                   
                  ╱───────────────╲                                                     
                 ╱                 ╲                                                    
                ╱                   ╲                                                   
               ╱        Unit         ╲                                                  
              ╱───────────────────────╲                                                 
             ╱                         ╲                                                
            ╱                           ╲                                               
           ╱           Static            ╲                                              
           ───────────────────────────────                                             
</span>
</code></pre>
<p>^ The testing pyramid</p>
<p>^ A type of integration test</p>
<p>^ You're not going to cover everything with visual regression, focus on the things that matter</p>
<p>^ Now lets get into it</p>
<h2>Examples</h2>
<ul>
<li><a href="https://github.com/csi-lk/visual-regression-how-to/" class="external" target="_blank" rel="noopener noreferrer">Companion Repo - https://github.com/csi-lk/visual-regression-how-to/</a></li>
<li><a href="https://percy.io" class="external" target="_blank" rel="noopener noreferrer">Percy.io</a> (<a href="https://percy.io/csilk/storybook-components/builds/5575612?utm_campaign=csilk&amp;utm_content=storybook-components&amp;utm_source=github_status_public" class="external" target="_blank" rel="noopener noreferrer">Interface Example</a>)
<ul>
<li>Ready made examples, easy setup</li>
<li>Supports parallelisation</li>
</ul>
</li>
<li><a href="https://happo.io" class="external" target="_blank" rel="noopener noreferrer">Happo.io</a> (<a href="https://happo.io/a/372/p/455/report/test" class="external" target="_blank" rel="noopener noreferrer">Interface Example</a>)
<ul>
<li>Supports all browsers</li>
<li>Founder (Henric) is awesome</li>
</ul>
</li>
</ul>
<p>^ Pros and cons to each tool</p>
<p>^ Percy plugs in well and has a ton of ready made examples for different tools eg. cypress etc.</p>
<p>^ Happo supports all browsers and I have to call out that the founder actually was emailing with me on Sunday due to github actions issues I had and eventually did a PR to this repo showing how it works in this context which is awesome</p>
<h2>Example - Storybook Components</h2>
<ul>
<li>Storybook</li>
<li>HTML Components</li>
<li><a href="https://github.com/csi-lk/visual-regression-how-to/pull/3" class="external" target="_blank" rel="noopener noreferrer">Example PR with review step</a></li>
<li>Pairs well with a design system or component library</li>
</ul>
<p>^ Storybook with HTML components, could be React or Vue</p>
<p>^ Here's something I prepared earlier</p>
<p>^ Your designer can come in and edit this - request changes</p>
<p>^ Approve all</p>
<h2>Example - Responsive Website</h2>
<ul>
<li>Eg. Jekyll, Gatsby etc.</li>
<li>Build out to HTML files</li>
<li>Breakpoints is where things go wrong</li>
<li><a href="https://github.com/csi-lk/visual-regression-how-to/pull/5" class="external" target="_blank" rel="noopener noreferrer">Example PR with review step</a></li>
<li>Pairs well with full page designs</li>
</ul>
<p>^ Lots of companies have static sites now from some content source that goes through something like Jekyll or Gatsby and spits out HTML files</p>
<p>^ Plug: my personal website csi.lk works exactly like this</p>
<p>^ Point percy at the <s>porcelain</s> dist with your <code>.html</code> glob and set it up do so some diffing</p>
<p>^ Once again designer comes in, approves and moves on</p>
<pre><code class="hljs">                                                                                                  
        .─.                      .─.                                                      .─.     
       (   )    ┌────────┬─┐    (   )   ┌──────────┐   ┌────────┐         ┌────────┐     (   )    
       ┌`─&#x27;┐    │  Ticket└─┤    ┌`─&#x27;┐   │          │   │        │  Merge  │   QA   │     ┌`─&#x27;┐    
       │Des│───&gt;│  Story   │───&gt;│Dev│──&gt;│  Branch  │──&gt;│   PR   │────────&gt;│  STG   │  ──&gt;│QA │    
       │ign│    │          │    │   │   │          │   │        │         │  UAT   │     │   │    
       └───┘    └──────────┘    └───┘   └──────────┘   └┬───────┘         └────────┘     └───┘    
                                  ▲         .─.         ├&gt;Tests Pass                              
                                  │        (   )        └&gt;Approval                                
                           Fails Something ┌`─&#x27;┐                 │                                
                                  │        │Des│                 │                                
                                  └────────│ign│◀────────────────┘                                
                                           └───┘                                                                   
</code></pre>
<p>^ Remember our workflow from before?</p>
<p>^ Shorten the loop</p>
<h2>Pros</h2>
<ul>
<li>Reduce manual QA time</li>
<li>Include designers in the process</li>
<li>Reduce the feedback loop</li>
<li>Get it right once</li>
</ul>
<p>^ No more: this is a high risk change because I edited the color of the button</p>
<p>^ Shorten the feedback loop, put designers in the process, create ownership</p>
<h2>Cons</h2>
<ul>
<li>Extra step in a PR</li>
<li>Extra tool to manage</li>
<li>Train designers on PR process</li>
<li>Takes time to run</li>
</ul>
<p>^ As we mentioned your designers will need github access</p>
</article></main> <footer class="footer undefined" data-testid="footer"><div ><p >© 2022</p> <a href="/">Callum Silcock</a></div> <div ><p >Contact</p> <a href="mailto:contact@csi.lk" target="_blank" rel="noopener noreferrer" aria-describedby="open-email">Email</a></div> <div ><p >Code</p> <a href="https://github.com/csi-lk/" target="_blank" rel="noopener noreferrer" aria-describedby="open-new-window-external">Github</a></div> <div ><p >Social</p> <a href="https://au.linkedin.com/in/callumsilcock" target="_blank" rel="noopener noreferrer" aria-describedby="open-new-window-external">LinkedIn</a> / <a href="https://stackoverflow.com/users/766958/csilk" target="_blank" rel="noopener noreferrer" aria-describedby="open-new-window-external">Stackoverflow</a></div></footer></div></body></html>
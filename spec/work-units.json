{
  "version": "0.7.1",
  "meta": {
    "version": "1.0.0",
    "lastUpdated": "2025-12-17T02:27:15.332Z"
  },
  "workUnits": {
    "FOUND-001": {
      "id": "FOUND-001",
      "title": "Conduct Foundation Event Storm for Foundation",
      "status": "backlog",
      "createdAt": "2025-12-17T01:25:43.871Z",
      "updatedAt": "2025-12-17T01:25:43.871Z",
      "stateHistory": [
        {
          "state": "backlog",
          "timestamp": "2025-12-17T01:25:43.871Z"
        }
      ],
      "description": "Complete the foundation by capturing domain architecture through Foundation Event Storm.\n\nUse these commands to populate foundation.json eventStorm field:\n- fspec add-foundation-bounded-context <name>\n- fspec add-aggregate-to-foundation <context> <aggregate>\n- fspec add-domain-event-to-foundation <context> <event>\n- fspec show-foundation-event-storm\n\nWhy this matters:\n- Establishes bounded contexts for domain-driven design\n- Enables tag ontology generation from domain model\n- Provides foundation for architectural documentation\n- Supports EXMAP-004 tag discovery workflow\n\nSee spec/CLAUDE.md \"Foundation Event Storm\" section for detailed guidance.",
      "type": "task"
    },
    "INFRA-001": {
      "id": "INFRA-001",
      "title": "Set up v3 repo structure",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T01:27:12.197Z",
      "updatedAt": "2025-12-17T01:29:26.207Z",
      "description": "Create v3 branch with PocketBase directory structure (pb_hooks/, pb_migrations/, pb_public/, .github/workflows/, scripts/) and update README.md with deployment information",
      "epic": "initial-infrastructure",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T01:28:34.079Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T01:28:51.185Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T01:29:20.956Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T01:29:26.207Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T01:29:26.207Z"
    },
    "INFRA-002": {
      "id": "INFRA-002",
      "title": "Set up Bun as command runner",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T01:27:17.713Z",
      "updatedAt": "2025-12-17T01:30:11.746Z",
      "description": "Create package.json with Bun scripts (lint, test, check) as primary command runner for repo tasks",
      "epic": "initial-infrastructure",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T01:29:38.095Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T01:29:38.853Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T01:30:10.974Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T01:30:11.746Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T01:30:11.746Z"
    },
    "INFRA-003": {
      "id": "INFRA-003",
      "title": "Set up CI/CD deploy to PocketHost",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T01:27:22.479Z",
      "updatedAt": "2025-12-17T01:30:44.022Z",
      "description": "Create GitHub Actions workflow to deploy pb_hooks/, pb_migrations/, and pb_public/ to PocketHost via FTPS on push to v3 branch",
      "epic": "initial-infrastructure",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T01:30:23.415Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T01:30:24.185Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T01:30:43.249Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T01:30:44.022Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T01:30:44.022Z"
    },
    "UI-001": {
      "id": "UI-001",
      "title": "Create public boot page",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T01:46:13.343Z",
      "updatedAt": "2025-12-17T02:16:09.182Z",
      "description": "Implement public landing page at / with identity, context/writing, and SilkOS sections. Minimal styling, no auth prompts, readable without JavaScript.",
      "epic": "boot-and-routing",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T02:14:12.842Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:14:13.616Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:16:08.397Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:16:09.182Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T02:16:09.182Z"
    },
    "UI-002": {
      "id": "UI-002",
      "title": "Healthcheck endpoint verification",
      "type": "story",
      "status": "done",
      "createdAt": "2025-12-17T01:46:45.277Z",
      "updatedAt": "2025-12-17T02:13:52.441Z",
      "description": "Verify /healthz endpoint returns 200 OK with JSON containing ok, service, and version fields. Does not require auth.",
      "epic": "boot-and-routing",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T01:47:22.865Z"
        },
        {
          "state": "testing",
          "timestamp": "2025-12-17T01:59:14.760Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:11:05.685Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:13:51.647Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:13:52.441Z"
        }
      ],
      "userStory": {
        "role": "deployment verification user",
        "action": "check if the deployment is live",
        "benefit": "I can quickly confirm the service is running without logging in"
      },
      "rules": [
        {
          "id": 0,
          "text": "Healthcheck endpoint must be accessible without authentication",
          "deleted": false,
          "createdAt": "2025-12-17T01:48:18.392Z"
        },
        {
          "id": 1,
          "text": "Response must be HTTP 200 OK",
          "deleted": false,
          "createdAt": "2025-12-17T01:48:23.522Z"
        },
        {
          "id": 2,
          "text": "Response must contain JSON with ok, service, and version fields",
          "deleted": false,
          "createdAt": "2025-12-17T01:48:31.696Z"
        }
      ],
      "nextRuleId": 3,
      "examples": [
        {
          "id": 0,
          "text": "User visits https://csilk.pockethost.io/healthz and receives {\"ok\": true, \"service\": \"csi.lk\", \"version\": \"v3\"}",
          "deleted": false,
          "createdAt": "2025-12-17T01:50:09.725Z"
        }
      ],
      "nextExampleId": 1,
      "architectureNotes": [
        {
          "id": 0,
          "text": "Healthcheck endpoint already exists at pb_hooks/healthcheck.pb.js, returns JSON with ok, service, timestamp, and version fields. This work unit creates Gherkin scenarios to document the expected behavior.",
          "deleted": false,
          "createdAt": "2025-12-17T01:55:18.609Z"
        }
      ],
      "nextNoteId": 1,
      "attachments": [
        "spec/attachments/UI-002/ast-research-healthcheck-functions.md"
      ],
      "questions": [],
      "nextQuestionId": 0,
      "updated": "2025-12-17T02:13:52.441Z"
    },
    "UI-003": {
      "id": "UI-003",
      "title": "Implement private app entry",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T01:46:51.894Z",
      "updatedAt": "2025-12-17T02:18:08.323Z",
      "description": "Create /app route that redirects to /login if not authenticated, or renders OS shell with user identity, version, and logout link if authenticated.",
      "epic": "boot-and-routing",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T02:17:39.938Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:17:40.726Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:18:07.496Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:18:08.323Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T02:18:08.323Z"
    },
    "UI-004": {
      "id": "UI-004",
      "title": "Implement authentication flow",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T01:46:58.438Z",
      "updatedAt": "2025-12-17T02:17:33.765Z",
      "description": "Create /login page with email/password inputs, POST /login handler, and POST /logout handler. Successful login redirects to next param or /app, logout redirects to /.",
      "epic": "boot-and-routing",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T02:16:55.247Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:16:56.014Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:17:32.959Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:17:33.765Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T02:17:33.765Z"
    },
    "UI-005": {
      "id": "UI-005",
      "title": "Create reusable route guard",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T01:47:05.541Z",
      "updatedAt": "2025-12-17T02:16:48.387Z",
      "description": "Implement auth guard helper in pb_hooks/lib/auth.pb.js that checks authentication and redirects to /login?next=<path> if not authenticated. Used by all /app/* routes.",
      "epic": "boot-and-routing",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T02:16:25.536Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:16:26.309Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:16:47.609Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:16:48.387Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T02:16:48.387Z"
    },
    "UI-006": {
      "id": "UI-006",
      "title": "Document tech stack decisions",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T02:24:10.573Z",
      "updatedAt": "2025-12-17T02:25:19.600Z",
      "description": "Add Tech Stack section to README.md documenting PocketBase, PocketPages, HTMX choices and rationale",
      "epic": "ui-runtime-foundations",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T02:24:50.066Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:24:50.862Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:25:18.801Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:25:19.600Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T02:25:19.600Z"
    },
    "UI-007": {
      "id": "UI-007",
      "title": "Create shared layout template",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T02:24:21.016Z",
      "updatedAt": "2025-12-17T02:26:16.676Z",
      "description": "Implement base.ejs layout template with HTML skeleton, metadata, minimal CSS, and conditional HTMX script inclusion",
      "epic": "ui-runtime-foundations",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T02:25:37.884Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:25:38.673Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:26:15.849Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:26:16.676Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T02:26:16.676Z"
    },
    "UI-008": {
      "id": "UI-008",
      "title": "Document HTMX conventions",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T02:24:27.502Z",
      "updatedAt": "2025-12-17T02:27:07.166Z",
      "description": "Add HTMX via CDN, document usage patterns in README.md: SSR default, HTMX for inline actions/list refresh/forms, partial HTML responses",
      "epic": "ui-runtime-foundations",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T02:26:30.829Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:26:31.630Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:27:06.339Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:27:07.166Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T02:27:07.166Z"
    },
    "UI-009": {
      "id": "UI-009",
      "title": "Document route and file naming conventions",
      "type": "task",
      "status": "done",
      "createdAt": "2025-12-17T02:24:34.149Z",
      "updatedAt": "2025-12-17T02:27:15.337Z",
      "description": "Document routing structure: / and /public/* for public, /app/* for private, /app/notes/:id for notes. Document file patterns for hooks and templates",
      "epic": "ui-runtime-foundations",
      "children": [],
      "stateHistory": [
        {
          "state": "specifying",
          "timestamp": "2025-12-17T02:27:12.953Z"
        },
        {
          "state": "implementing",
          "timestamp": "2025-12-17T02:27:13.737Z"
        },
        {
          "state": "validating",
          "timestamp": "2025-12-17T02:27:14.532Z"
        },
        {
          "state": "done",
          "timestamp": "2025-12-17T02:27:15.337Z"
        }
      ],
      "rules": [],
      "examples": [],
      "questions": [],
      "architectureNotes": [],
      "nextRuleId": 0,
      "nextExampleId": 0,
      "nextQuestionId": 0,
      "nextNoteId": 0,
      "updated": "2025-12-17T02:27:15.337Z"
    }
  },
  "states": {
    "backlog": [
      "FOUND-001"
    ],
    "specifying": [],
    "testing": [],
    "implementing": [],
    "validating": [],
    "done": [
      "UI-009",
      "UI-008",
      "UI-007",
      "UI-006",
      "UI-003",
      "UI-004",
      "UI-005",
      "UI-001",
      "UI-002",
      "INFRA-003",
      "INFRA-002",
      "INFRA-001"
    ],
    "blocked": []
  },
  "prefixCounters": {
    "INFRA": 3,
    "UI": 9
  }
}
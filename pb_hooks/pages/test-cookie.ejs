<%
// Test page to figure out how to access cookies
const debug = {
  hasRequest: !!request,
  hasEvent: !!request.event,
  requestKeys: Object.keys(request),
  cookieTest: null,
  error: null
};

// Try different ways to access cookies
try {
  // Method 1: Direct cookie access
  debug.method1 = typeof request.cookie;
} catch (e) {
  debug.method1Error = e.message;
}

try {
  // Method 2: cookies with s
  debug.method2 = typeof request.cookies;
} catch (e) {
  debug.method2Error = e.message;
}

try {
  // Method 3: Check header
  if (request.event && request.event.request) {
    const req = request.event.request();
    debug.method3 = req.header.get('Cookie');
  }
} catch (e) {
  debug.method3Error = e.message;
}

response.json(200, debug);
%>

<%
// Test page to figure out authentication
const debug = {
  hasRequest: !!request,
  hasAuth: !!request.auth,
  authValue: request.auth,
  authType: typeof request.auth,
  authId: request.auth ? request.auth.id : null,
  authEmail: null
};

try {
  if (request.auth && request.auth.email) {
    debug.authEmail = request.auth.email();
  }
} catch (e) {
  debug.authEmailError = e.message;
}

response.json(200, debug);
%>

<html lang="en" class="no-js"><head ><meta name="keywords" content="reactjs, hooks, typescript, javascript"></meta> <meta name="description" content="My process of learning of React Hooks and how to 'type' them using Typescript"></meta> <meta charset="utf-8"></meta> <meta name="viewport" content="width=device-width, initial-scale=1."></meta> <meta name="author" content="Callum Silcock, contact@csi.lk"></meta> <meta name="reply-to" content="contact@csi.lk"></meta> <meta name="url" content="https://www.csi.lk"></meta> <meta name="coverage" content="Worldwide"></meta> <meta name="distribution" content="Global"></meta> <meta name="rating" content="General"></meta> <meta name="revisit-after" content="7 days"></meta> <meta httpEquiv="Expires" content="0"></meta> <meta httpEquiv="Pragma" content="no-cache"></meta> <meta httpEquiv="Cache-Control" content="no-cache"></meta> <meta httpEquiv="Content-Language" content="en"></meta> <meta name="og:type" content="text/html"></meta> <meta name="og:site_name" content="Callum Silcock | Lead Front End Developer & Conference Speaker"></meta> <meta name="og:email" content="contact@csi.lk"></meta> <meta name="og:phone_number" content="+447848472822"></meta> <title >↩ Understanding React Hooks </title> <link rel="stylesheet" href="/styles/index.css"></link></head> <body ><div class="page-container fixed"><a href="#content" class="skip">Skip to content</a> <nav class="navigation"><a class="logo" href="/"><i class="icon-terminal"></i> <h2 class="logo">Callum 
 Silcock</h2></a> <a href="articles.html">articles</a></nav> <main ><article id="content" class="article"><h1 >↩ Understanding React Hooks </h1> <p>After spending a few weeks working with and learning React Hooks, I wanted to collate it all into a quick cheatsheet for myself, I hope you can find some value in it.</p>
<h2>Insights</h2>
<ul>
<li>Can refactor all class components to function components
<ul>
<li>Ended up with lower filesizes of &gt;15%</li>
</ul>
</li>
<li>Simpler lifecycle methods</li>
<li>Everything is so much nicer now</li>
</ul>
<h2>Hooks</h2>
<h3>useState</h3>
<ul>
<li>replaces all state functions</li>
<li>type should easily be inferred based on initial value but still worth setting</li>
</ul>
<pre><code class="language-js">const [age, setAge] = useState &lt; number &gt; 28

return (
  &lt;Fragment&gt;
    &lt;p&gt;I am {age} Years of Age&lt;/p&gt;
    &lt;button onClick={() =&gt; setAge(age + 1)}&gt;Get older! &lt;/button&gt;
  &lt;/Fragment&gt;
)
</code></pre>
<h3>useEffect</h3>
<ul>
<li>combines <code>componentDidMount</code> and <code>componentWillUnmount</code> and<code>componetnDidUpdate</code></li>
<li>no types needed</li>
</ul>
<pre><code class="language-js">useEffect(() =&gt; {
  // do something on mount
  return () =&gt; {
    // do something on unmount (cleanup)
  }
}, []) //listen for change to x in [array] then trigger (update), empty for only mount / unmount
</code></pre>
<h3>useRef</h3>
<ul>
<li>usually used for referencing dom nodes
<ul>
<li><code>null</code> can be used as the initial value and a generic html can be used for the ref type</li>
</ul>
</li>
<li>Replaces <code>createRef</code></li>
<li>Can also be used as a replacement for instance properties on classes
<ul>
<li>Type should be inferred</li>
</ul>
</li>
</ul>
<pre><code class="language-js">const MyInput = () =&gt; {
  const inputRef = useRef &lt; HTMLInputElement &gt; null
  return &lt;input ref={inputRef} /&gt;
}
</code></pre>
<h3>useMemo / useCallback</h3>
<ul>
<li>shorthand for memoising functions
_ types inferred
_ make sure to specify the types of the parameters of the callback for useCallback, otherwise they will be set to <code>any</code></li>
</ul>
<pre><code class="language-js">const value = 10
// inferred as number
const result = useMemo(() =&gt; value * 2, [value])

const multiplier = 2
// inferred as (value: number) =&gt; number
const multiply = useCallback((value: number) =&gt; value * multiplier, [multiplier])
</code></pre>
<h3>useReducer</h3>
<ul>
<li>Exactly like a redux router
<ul>
<li>Typed in the same way</li>
</ul>
</li>
</ul>
<pre><code class="language-js">interface State {
  value: number;
}

type Action =
  | { type: 'increment' }
  | { type: 'decrement' }
  | { type: 'incrementAmount', amount: number }

const counterReducer = (state: State, action: Action) =&gt; {
  switch (action.type) {
    case 'increment':
      return { value: state.value + 1 }
    case 'decrement':
      return { value: state.value - 1 }
    case 'incrementAmount':
      return { value: state.value + action.amount }
    default:
      throw new Error()
  }
}

const [state, dispatch] = useReducer(counterReducer, { value: 0 })

dispatch({ type: 'increment' })
dispatch({ type: 'decrement' })
dispatch({ type: 'incrementAmount', amount: 10 })

// TypeScript compilation error
dispatch({ type: 'invalidActionType' })
</code></pre>
<h3>useContext</h3>
<ul>
<li>infer its types based on the context object that is passed in</li>
</ul>
<pre><code class="language-js">const ThemeContext = React.createContext('light')

const Display = () =&gt; {
  const theme = useContext(ThemeContext)
  return (
    &lt;div
      style=
    &gt;
      {'The theme here is ' + theme}
    &lt;/div&gt;
  )
}
</code></pre>
<h3>useDebugValue</h3>
<ul>
<li>used for displaying values in React Developer Tools</li>
<li>type is inferred</li>
</ul>
<pre><code class="language-js">const date = new Date()
useDebugValue(date, date =&gt; date.toISOString())
</code></pre>
<h2>Resources</h2>
<ul>
<li><a href="https://react-hooks-cheatsheet.surge.sh/" class="external" target="_blank" rel="noopener">A great cheatsheet with live editable examples</a></li>
<li><a href="https://egghead.io/courses/reusable-state-and-effects-with-react-hooks" class="external" target="_blank" rel="noopener">Straightforward egghead course by Elijah Manor</a></li>
<li><a href="https://medium.com/@jrwebdev/react-hooks-in-typescript-88fce7001d0d" class="external" target="_blank" rel="noopener">How to 'type' React Hooks</a></li>
</ul>
</article></main> <footer class="footer undefined"><div ><p >© 2020</p> <a href="/">Callum Silcock</a></div> <div ><p >Contact</p> <a href="mailto:contact@csi.lk" target="_blank">Email</a></div> <div ><p >Code</p> <a href="https://github.com/csi-lk/" target="_blank">Github</a></div> <div ><p >Social</p> <a href="https://au.linkedin.com/in/callumsilcock" target="_blank">LinkedIn</a> / <a href="https://stackoverflow.com/users/766958/csilk" target="_blank">Stackoverflow</a></div></footer></div></body></html>